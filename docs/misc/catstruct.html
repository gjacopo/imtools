<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"><html>  <head>    <meta content="text/html; charset=utf-8" http-equiv="content-type">    <!--This HTML was auto-generated from MATLAB code.To make changes, update the MATLAB code and republish this document.      -->    <title>CATSTRUCT - Concatenate structures.</title>    <meta name="generator" content="MATLAB 7.14">    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">    <meta name="DC.date" content="2012-11-14">    <meta name="DC.source" content="catstruct.m">    <style type="text/css">html,body,div,span,applet,object,iframe,h1,h2,h3,h4,h5,h6,p,blockquote,pre,a,abbr,acronym,address,big,cite,code,del,dfn,em,font,img,ins,kbd,q,s,samp,small,strike,strong,sub,sup,tt,var,b,u,i,center,dl,dt,dd,ol,ul,li,fieldset,form,label,legend,table,caption,tbody,tfoot,thead,tr,th,td{margin:0;padding:0;border:0;outline:0;font-size:100%;vertical-align:baseline;background:transparent}body{line-height:1}ol,ul{list-style:none}blockquote,q{quotes:none}blockquote:before,blockquote:after,q:before,q:after{content:'';content:none}:focus{outine:0}ins{text-decoration:none}del{text-decoration:line-through}table{border-collapse:collapse;border-spacing:0}html { min-height:100%; margin-bottom:1px; }html body { height:100%; margin:0px; font-family:Arial, Helvetica, sans-serif; font-size:10px; color:#000; line-height:140%; background:#fff none; overflow-y:scroll; }html body td { vertical-align:top; text-align:left; }h1 { padding:0px; margin:0px 0px 25px; font-family:Arial, Helvetica, sans-serif; font-size:1.5em; color:#d55000; line-height:100%; font-weight:normal; }h2 { padding:0px; margin:0px 0px 8px; font-family:Arial, Helvetica, sans-serif; font-size:1.2em; color:#000; font-weight:bold; line-height:140%; border-bottom:1px solid #d6d4d4; display:block; }h3 { padding:0px; margin:0px 0px 5px; font-family:Arial, Helvetica, sans-serif; font-size:1.1em; color:#000; font-weight:bold; line-height:140%; }a { color:#005fce; text-decoration:none; }a:hover { color:#005fce; text-decoration:underline; }a:visited { color:#004aa0; text-decoration:none; }p { padding:0px; margin:0px 0px 20px; }img { padding:0px; margin:0px 0px 20px; border:none; }p img, pre img, tt img, li img { margin-bottom:0px; } ul { padding:0px; margin:0px 0px 20px 23px; list-style:square; }ul li { padding:0px; margin:0px 0px 7px 0px; }ul li ul { padding:5px 0px 0px; margin:0px 0px 7px 23px; }ul li ol li { list-style:decimal; }ol { padding:0px; margin:0px 0px 20px 0px; list-style:decimal; }ol li { padding:0px; margin:0px 0px 7px 23px; list-style-type:decimal; }ol li ol { padding:5px 0px 0px; margin:0px 0px 7px 0px; }ol li ol li { list-style-type:lower-alpha; }ol li ul { padding-top:7px; }ol li ul li { list-style:square; }.content { font-size:1.2em; line-height:140%; padding: 20px; }pre, tt, code { font-size:12px; }pre { margin:0px 0px 20px; }pre.error { color:red; }pre.codeinput { padding:10px; border:1px solid #d3d3d3; background:#f7f7f7; }pre.codeoutput { padding:10px 11px; margin:0px 0px 20px; color:#4c4c4c; }@media print { pre.codeinput, pre.codeoutput { word-wrap:break-word; width:100%; } }span.keyword { color:#0000FF }span.comment { color:#228B22 }span.string { color:#A020F0 }span.untermstring { color:#B20000 }span.syscmd { color:#B28C00 }.footer { width:auto; padding:10px 0px; margin:25px 0px 0px; border-top:1px dotted #878787; font-size:0.8em; line-height:140%; font-style:italic; color:#878787; text-align:left; float:none; }.footer p { margin:0px; }  </style>  </head>  <body>    <div class="content">      <h1>CATSTRUCT - Concatenate structures.</h1>      <!--introduction--><!--/introduction-->      <h2>Contents</h2>      <div>        <ul>          <li><a href="#1">Syntax <i>(i)</i></a></li>          <li><a href="#2">Syntax <i>(ii)</i></a></li>          <li><a href="#3">Remarks</a></li>          <li><a href="#4">Example</a></li>          <li><a href="#5">Acknowledgment</a></li>          <li><a href="#7">See also</a></li>          <li><a href="#8">Function implementation</a></li>        </ul>      </div>      <h2>Syntax <i>(i)</i><a name="1"></a></h2>      <pre>   X = CATSTRUCT(S1,S2,S3,...)</pre>      <p>Concate the structures <tt>S1</tt>, <tt>S2</tt>, ... into one        structure <tt>X</tt>.</p>      <h2>Syntax <i>(ii)</i><a name="2"></a></h2>      <pre>   CATSTRUCT(S1,S2,'sorted')</pre>      <p>Sort the fieldnames alphabetically.</p>      <h2>Remarks<a name="3"></a></h2>      <div>        <ul>          <li>If a fieldname occurs more than once in the argument list, only            the last occurence is used, and the fields are alphabetically            sorted.</li>        </ul>      </div>      <div>        <ul>          <li>To sort the fieldnames of a structure <tt>A</tt> use:</li>        </ul>      </div>      <pre>   A = CATSTRUCT(A,'sorted') ;</pre>      <div>        <ul>          <li>To concatenate two similar array of structs use simple            concatenation:</li>        </ul>      </div>      <pre>   A = dir('*.mat') ; B = dir('*.m') ; C = [A ; B] ;</pre>      <div>        <ul>          <li>When there is nothing to concatenate, the result will be an empty            struct (<tt>(0,0)</tt> struct array with no fields).</li>        </ul>      </div>      <h2>Example<a name="4"></a></h2>      <pre>   A.name = 'Me' ; B.income = 99999 ;   X = CATSTRUCT(A,B)   % -&gt; X.name = 'Me';  X.income = 99999 ;</pre>      <h2>Acknowledgment<a name="5"></a></h2>      <p>for Matlab R13 and up - version 2.2 (oct 2008) © <a href="mailto:jos@jasen.nl">Jos          van der Geest</a></p>      <h2>See also<a name="7"></a></h2>      <p>Related: <a href="mergestruct.html"><tt>MERGESTRUCT</tt></a>, <a href="structa2astruct.html"><tt>STRUCTA2ASTRUCT</tt></a>.        Called: <a href="matlab:webpub%28whichpath%28%27CAT%27%29%29"><tt>CAT</tt></a>,        <a href="matlab:webpub%28whichpath%28%27STRUCT%27%29%29"><tt>STRUCT</tt></a>,        <a href="matlab:webpub%28whichpath%28%27FIELDNAMES%27%29%29"><tt>FIELDNAMES</tt></a>,        <a href="matlab:webpub%28whichpath%28%27STRUCT2CELL%27%29%29"><tt>STRUCT2CELL</tt></a>.</p>      <pre class="codeinput"><span class="comment">% History</span><span class="comment">% Created:  2005</span><span class="comment">% Revisions</span><span class="comment">%   2.0 (sep 2007) removed bug when dealing with fields containing cell</span><span class="comment">%                  arrays (Thanks to Rene Willemink)</span><span class="comment">%   2.1 (sep 2008) added warning and error identifiers</span><span class="comment">%   2.2 (oct 2008) fixed error when dealing with empty structs (Thanks to</span><span class="comment">%                  Lars Barring)</span></pre>      <h2>Function implementation<a name="8"></a></h2>      <pre class="codeinput"><span class="keyword">function</span> A = catstruct(varargin)N = nargin ;error(nargchk(1,Inf,N)) ;<span class="keyword">if</span> ~isstruct(varargin{end}),    <span class="keyword">if</span> isequal(varargin{end},<span class="string">'sorted'</span>),        sorted = 1 ;        N = N-1 ;        <span class="keyword">if</span> N &lt; 1,            A = struct([]) ;            <span class="keyword">return</span>        <span class="keyword">end</span>    <span class="keyword">else</span>        error(<span class="string">'catstruct:InvalidArgument'</span>,<span class="string">'Last argument should be a structure, or the string "sorted".'</span>) ;    <span class="keyword">end</span><span class="keyword">else</span>    sorted = 0 ;<span class="keyword">end</span>FN = cell(N,1) ;VAL = cell(N,1) ;<span class="keyword">for</span> ii=1:N,    X = varargin{ii} ;    <span class="keyword">if</span> ~isstruct(X),        error(<span class="string">'catstruct:InvalidArgument'</span>,[<span class="string">'Argument #'</span> num2str(ii) <spanclass="string">' is not a structure.'</span>]) ;    <span class="keyword">end</span>    <span class="keyword">if</span> ~isempty(X),        <span class="comment">% empty structs are ignored</span>        FN{ii} = fieldnames(X) ;        VAL{ii} = struct2cell(X) ;    <span class="keyword">end</span><span class="keyword">end</span>FN = cat(1,FN{:}) ;VAL = cat(1,VAL{:}) ;[UFN,ind] = unique(FN) ;<span class="keyword">if</span> numel(UFN) ~= numel(FN),    warning(<span class="string">'catstruct:DuplicatesFound'</span>,<span class="string">'Duplicate fieldnames found. Last value is used and fields are sorted'</span>) ;    sorted = 1 ;<span class="keyword">end</span><span class="keyword">if</span> sorted,    VAL = VAL(ind) ;    FN = FN(ind) ;<span class="keyword">end</span><span class="keyword">if</span> ~isempty(FN),    <span class="comment">% This deals correctly with cell arrays</span>    A = cell2struct(VAL, FN);<span class="keyword">else</span>    A = struct([]) ;<span class="keyword">end</span> <span class="comment">% end of catstruct</span></pre></div>    <!--##### SOURCE BEGIN #####%% CATSTRUCT - Concatenate structures.%%% Syntax _(i)_%     X = CATSTRUCT(S1,S2,S3,...) %% Concate the structures |S1|, |S2|, ... into one structure |X|. %%% Syntax _(ii)_ %     CATSTRUCT(S1,S2,'sorted') %% Sort the fieldnames alphabetically.%%% Remarks% * If a fieldname occurs more than once in the argument list, only the last%   occurence is used, and the fields are alphabetically sorted.%% * To sort the fieldnames of a structure |A| use:%%     A = CATSTRUCT(A,'sorted') ;%% * To concatenate two similar array of structs use simple concatenation:%%     A = dir('*.mat') ; B = dir('*.m') ; C = [A ; B] ;%% * When there is nothing to concatenate, the result will be an empty%   struct (|(0,0)| struct array with no fields). %%% Example:%     A.name = 'Me' ; B.income = 99999 ; %     X = CATSTRUCT(A,B) %     % -> X.name = 'Me';  X.income = 99999 ;%%% Acknowledgment% for Matlab R13 and up - version 2.2 (oct 2008)% © <mailto:jos@jasen.nl Jos van der Geest>%%% Contact% <mailto:grazzja@lanl.gov J.Grazzini> (ISR-2/LANL)%%% See also% Related:% <mergestruct.html |MERGESTRUCT|>,% <structa2astruct.html |STRUCTA2ASTRUCT|>.% Called:% <matlab:webpub(whichpath('CAT')) |CAT|>,% <matlab:webpub(whichpath('STRUCT')) |STRUCT|>,% <matlab:webpub(whichpath('FIELDNAMES')) |FIELDNAMES|>,% <matlab:webpub(whichpath('STRUCT2CELL')) |STRUCT2CELL|>.% History% Created:  2005% Revisions%   2.0 (sep 2007) removed bug when dealing with fields containing cell%                  arrays (Thanks to Rene Willemink) %   2.1 (sep 2008) added warning and error identifiers%   2.2 (oct 2008) fixed error when dealing with empty structs (Thanks to%                  Lars Barring)%% Function implementationfunction A = catstruct(varargin)N = nargin ;error(nargchk(1,Inf,N)) ;if ~isstruct(varargin{end}),    if isequal(varargin{end},'sorted'),        sorted = 1 ;        N = N-1 ;        if N < 1,            A = struct([]) ;            return        end    else        error('catstruct:InvalidArgument','Last argument should be a structure, or the string "sorted".') ;    endelse    sorted = 0 ;endFN = cell(N,1) ;VAL = cell(N,1) ;for ii=1:N,    X = varargin{ii} ;    if ~isstruct(X),        error('catstruct:InvalidArgument',['Argument #' num2str(ii) ' is not a structure.']) ;    end    if ~isempty(X),        % empty structs are ignored        FN{ii} = fieldnames(X) ;        VAL{ii} = struct2cell(X) ;     endendFN = cat(1,FN{:}) ;VAL = cat(1,VAL{:}) ;[UFN,ind] = unique(FN) ;if numel(UFN) ~= numel(FN),    warning('catstruct:DuplicatesFound','Duplicate fieldnames found. Last value is used and fields are sorted') ;    sorted = 1 ;endif sorted,    VAL = VAL(ind) ;    FN = FN(ind) ;endif ~isempty(FN),    % This deals correctly with cell arrays    A = cell2struct(VAL, FN);else    A = struct([]) ;end % end of catstruct##### SOURCE END #####--></body></html>